<!--
 Required Notice: Â© Copyright 2025 KSEC - Erez Kalman (kaerez[at]gmail[dot]com | www.kalman.co.il | https://github.com/zeno-security/zeno | https://github.com/kaerez)

 This software is licensed under the PolyForm Strict License 1.0.0.
 You may obtain a copy of the License at:
 * https://polyformproject.org/licenses/strict/1.0.0/

 SPDX-License-Identifier: PolyForm-Strict-1.0.0
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zeno Client Demo</title>

    <style>
        *,
        *:before,
        *:after {
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
            padding: 40px;
            background: #f5f5f7;
            color: #1d1d1f;
            line-height: 1.5;
        }

        h1 {
            font-weight: 700;
            font-size: 32px;
            margin-bottom: 40px;
            text-align: center;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            gap: 40px;
        }

        .demo-row {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 30px;
            background: white;
            border-radius: 18px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);
            align-items: start;
        }

        .widget-area {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .widget-area p {
            text-align: left;
        }

        h2 {
            margin: 0 0 10px 0;
            font-size: 20px;
            font-weight: 600;
            text-align: left;
        }

        .code-viewer {
            border-radius: 12px;
            overflow: hidden;
            background: #ffffff;
            border: 1px solid #e1e1e1;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .tabs {
            display: flex;
            background: #f3f3f3;
            border-bottom: 1px solid #e1e1e1;
        }

        .tab-btn {
            padding: 10px 20px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            color: #333333;
            border-right: 1px solid #e1e1e1;
            transition: all 0.2s;
        }

        .tab-btn:hover {
            background: #e8e8e8;
        }

        .tab-btn.active {
            background: #ffffff;
            color: #000000;
            font-weight: 600;
            border-bottom: 2px solid #007acc;
            margin-bottom: -1px;
        }

        .tab-content {
            display: none;
            padding: 16px 20px;
            font-family: 'JetBrains Mono', 'Fira Code', 'SF Mono', Monaco, Consolas, 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
            color: #333333;
            white-space: pre;
            overflow-x: auto;
            overflow-y: auto;
            background: #ffffff;
            text-align: left;
            height: 280px;
            tab-size: 2;
        }

        .tab-content.active {
            display: block;
        }

        /* Syntax Highlighting - VS Code Light Theme */
        .c {
            color: #008000;
            font-style: italic;
        }

        /* comment */
        .t {
            color: #800000;
        }

        /* tag */
        .a {
            color: #e50000;
        }

        /* attr-name */
        .v {
            color: #0000ff;
        }

        /* attr-value */
        .k {
            color: #af00db;
        }

        /* keyword */
        .f {
            color: #795e26;
        }

        /* function */
        .s {
            color: #a31515;
        }

        /* string */
        .n {
            color: #098658;
        }

        /* number */
        .p {
            color: #001080;
        }

        /* property */
        .x {
            color: #0070c1;
        }

        /* variable */
        .sel {
            color: #800000;
        }

        /* selector */
        .cp {
            color: #e50000;
        }

        /* css-property */
        .cv {
            color: #0000ff;
        }

        /* css-value */

        .controls {
            display: grid;
            gap: 15px;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 13px;
            color: #555;
            text-align: left;
        }

        input[type="text"] {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #d1d1d6;
            border-radius: 8px;
            font-size: 14px;
            font-family: 'SF Mono', monospace;
            color: #333;
            text-align: left;
        }

        button.action-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        button.action-btn:hover {
            background: #0056b3;
        }

        #inv-log {
            font-family: inherit;
            margin: 0;
            font-size: 14px;
            padding: 10px 0;
            color: #555;
            text-align: left;
        }
    </style>
</head>

<body>
    <h1>Zeno Client Demo</h1>

    <div class="container">

        <!-- 1. Standard Mode -->
        <div class="demo-row">
            <div class="widget-area">
                <h2>1. Standard</h2>
                <p style="color:#666; font-size:14px;">The default web component.</p>
                <zeno-widget id="zeno-std" zeno-api-endpoint="https://zeno.secops.workers.dev/api"
                    zeno-site-key="550e8400-e29b-41d4-a716-446655440000"
                    onsolve="console.log('Standard Solved:', event.detail.token);"></zeno-widget>
            </div>
            <div class="code-viewer">
                <div class="tabs">
                    <button class="tab-btn active" onclick="openTab(event, 'std-html')">HTML</button>
                    <button class="tab-btn" onclick="openTab(event, 'std-js')">JavaScript</button>
                    <button class="tab-btn" onclick="openTab(event, 'std-css')">CSS</button>
                </div>
                <div id="std-html" class="tab-content active"></div>
                <div id="std-js" class="tab-content"></div>
                <div id="std-css" class="tab-content"></div>
            </div>
        </div>

        <!-- 2. Floating Mode -->
        <div class="demo-row">
            <div class="widget-area">
                <h2>2. Floating Mode</h2>
                <p style="color:#666; font-size:14px;">Hidden until triggered.</p>
                <button class="action-btn" zeno-floating="#zeno-float">Verify Me (Floating)</button>
                <zeno-widget id="zeno-float" zeno-api-endpoint="https://zeno.secops.workers.dev/api"
                    zeno-site-key="550e8400-e29b-41d4-a716-446655440000" style="display: none;"
                    onsolve="console.log('Floating Solved! Token:', event.detail.token)"></zeno-widget>
            </div>
            <div class="code-viewer">
                <div class="tabs">
                    <button class="tab-btn active" onclick="openTab(event, 'float-html')">HTML</button>
                    <button class="tab-btn" onclick="openTab(event, 'float-js')">JavaScript</button>
                    <button class="tab-btn" onclick="openTab(event, 'float-css')">CSS</button>
                </div>
                <div id="float-html" class="tab-content active"></div>
                <div id="float-js" class="tab-content"></div>
                <div id="float-css" class="tab-content"></div>
            </div>
        </div>

        <!-- 3. Invisible Mode -->
        <div class="demo-row">
            <div class="widget-area">
                <h2>3. Invisible API</h2>
                <p style="color:#666; font-size:14px;">Programmatic invocation.</p>
                <button id="btn-invisible" class="action-btn">Run Invisible Solve</button>
                <div id="inv-log">Waiting...</div>
            </div>
            <div class="code-viewer">
                <div class="tabs">
                    <button class="tab-btn active" onclick="openTab(event, 'inv-html')">HTML</button>
                    <button class="tab-btn" onclick="openTab(event, 'inv-js')">JavaScript</button>
                    <button class="tab-btn" onclick="openTab(event, 'inv-css')">CSS</button>
                </div>
                <div id="inv-html" class="tab-content active"></div>
                <div id="inv-js" class="tab-content"></div>
                <div id="inv-css" class="tab-content"></div>
            </div>
        </div>

        <!-- 4. Styling Playground -->
        <div class="demo-row" style="display: flex; flex-direction: column; gap: 30px;">
            <h2>4. Styling Playground</h2>
            <div
                style="margin: 30px 0; padding: 40px; background: #fafafa; border: 1px dashed #ddd; border-radius: 12px; display: flex; justify-content: center; align-items: center;">
                <zeno-widget id="zeno-style" zeno-api-endpoint="https://zeno.secops.workers.dev/api"
                    zeno-site-key="550e8400-e29b-41d4-a716-446655440000"></zeno-widget>
            </div>
            <div class="controls" style="grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 30px;">
                <div><label>--zeno-background</label><input type="text" value="#1a1a1a"
                        oninput="updateStyle('--zeno-background', this.value)"></div>
                <div><label>--zeno-color</label><input type="text" value="#ffffff"
                        oninput="updateStyle('--zeno-color', this.value)"></div>
                <div><label>--zeno-border-radius</label><input type="text" value="26px"
                        oninput="updateStyle('--zeno-border-radius', this.value)"></div>
                <div><label>--zeno-background-hover</label><input type="text" value="#1a1a1a"
                        oninput="updateStyle('--zeno-background-hover', this.value)"></div>
                <div><label>--zeno-border-color</label><input type="text" value="#444"
                        oninput="updateStyle('--zeno-border-color', this.value)"></div>
                <div><label>--zeno-widget-height</label><input type="text" value="52px"
                        oninput="updateStyle('--zeno-widget-height', this.value)"></div>
                <div><label>--zeno-widget-width</label><input type="text" value="260px"
                        oninput="updateStyle('--zeno-widget-width', this.value)"></div>
                <div><label>--zeno-widget-padding</label><input type="text" value="12px"
                        oninput="updateStyle('--zeno-widget-padding', this.value)"></div>
                <div><label>--zeno-checkbox-background</label><input type="text" value="#333"
                        oninput="updateStyle('--zeno-checkbox-background', this.value)"></div>
                <div><label>--zeno-checkbox-border</label><input type="text" value="1px solid #555"
                        oninput="updateStyle('--zeno-checkbox-border', this.value)"></div>
                <div><label>--zeno-checkbox-border-radius</label><input type="text" value="8px"
                        oninput="updateStyle('--zeno-checkbox-border-radius', this.value)"></div>
                <div><label>--zeno-checkbox-size</label><input type="text" value="24px"
                        oninput="updateStyle('--zeno-checkbox-size', this.value)"></div>
                <div style="grid-column: span 2"><label>--zeno-font</label><input type="text" value="system-ui"
                        oninput="updateStyle('--zeno-font', this.value)"></div>
                <div style="grid-column: span 2"><label>--zeno-i18n-wasm-banner</label><input type="text"
                        value='"Enable WASM for significantly faster solving"'
                        oninput="updateStyle('--zeno-i18n-wasm-banner', this.value)"></div>
                <div style="grid-column: span 2"><label>--zeno-i18n-js-mode-label</label><input type="text"
                        value='"Running in compatibility mode"'
                        oninput="updateStyle('--zeno-i18n-js-mode-label', this.value)"></div>
            </div>
        </div>

        <!-- 5. JS Fallback Mode -->
        <div class="demo-row">
            <div class="widget-area">
                <h2>5. JS Fallback Mode (ForceJS)</h2>
                <p style="color:#666; font-size:14px;">Forces Pure JS solver with UI banners.</p>
                <zeno-widget id="zeno-js" zeno-api-endpoint="https://zeno.secops.workers.dev/api"
                    zeno-site-key="550e8400-e29b-41d4-a716-446655440000" zeno-force-js
                    onsolve="console.log('JS Solved:', event.detail.token)"></zeno-widget>
            </div>
            <div class="code-viewer">
                <div class="tabs">
                    <button class="tab-btn active" onclick="openTab(event, 'js-html')">HTML</button>
                    <button class="tab-btn" onclick="openTab(event, 'js-js')">JavaScript</button>
                    <button class="tab-btn" onclick="openTab(event, 'js-css')">CSS</button>
                </div>
                <div id="js-html" class="tab-content active"></div>
                <div id="js-js" class="tab-content"></div>
                <div id="js-css" class="tab-content"></div>
            </div>
        </div>

    </div>

    <script type="module" src="../zeno.min.js"></script>
    <script>
        // Code content definitions
        const codeContent = {
            'std-html': `<span class="c">&lt;!-- Include the Zeno library --&gt;</span>
<span class="t">&lt;script</span> <span class="a">type</span>=<span class="v">"module"</span> <span class="a">src</span>=<span class="v">"https://cdn.jsdelivr.net/gh/zeno-security/zeno@latest/dist/client/zeno.min.js"</span><span class="t">&gt;&lt;/script&gt;</span>

<span class="c">&lt;!-- Add the widget to your page --&gt;</span>
<span class="t">&lt;zeno-widget</span>
    <span class="a">zeno-site-key</span>=<span class="v">"550e8400-e29b-41d4-a716-446655440000"</span>
    <span class="a">zeno-api-endpoint</span>=<span class="v">"https://zeno.secops.workers.dev/api"</span>
    <span class="a">onsolve</span>=<span class="v">"handleSolve(event)"</span>
<span class="t">&gt;&lt;/zeno-widget&gt;</span>`,

            'std-js': `<span class="c">// Get reference to the widget</span>
<span class="k">const</span> widget = document.<span class="f">querySelector</span>(<span class="s">'zeno-widget'</span>);

<span class="c">// Listen for successful solve</span>
widget.<span class="f">addEventListener</span>(<span class="s">'solve'</span>, (event) =&gt; {
    <span class="k">const</span> token = event.detail.token;
    console.<span class="f">log</span>(<span class="s">'Verification token:'</span>, token);

    <span class="c">// Send token to your server for validation</span>
    <span class="c">// Payload: { "token": token, "site_key": "YOUR_KEY", "single": true }</span>
    <span class="f">submitForm</span>(token);
});

<span class="c">// Listen for errors</span>
widget.<span class="f">addEventListener</span>(<span class="s">'error'</span>, (event) =&gt; {
    console.<span class="f">error</span>(<span class="s">'Zeno error:'</span>, event.detail.message);
});`,

            'std-css': `<span class="c">/* Default styles - no customization needed */</span>
<span class="c">/* Widget inherits default theme automatically */</span>

<span class="c">/* Optional: Container styling */</span>
<span class="sel">.form-container</span> {
    <span class="cp">display</span>: <span class="cv">flex</span>;
    <span class="cp">flex-direction</span>: <span class="cv">column</span>;
    <span class="cp">gap</span>: <span class="cv">16px</span>;
    <span class="cp">max-width</span>: <span class="cv">400px</span>;
}

<span class="c">/* Optional: Adjust widget margin */</span>
<span class="sel">zeno-widget</span> {
    <span class="cp">margin</span>: <span class="cv">16px 0</span>;
}`,

            'float-html': `<span class="c">&lt;!-- Trigger button with zeno-floating attribute --&gt;</span>
<span class="t">&lt;button</span> <span class="a">zeno-floating</span>=<span class="v">"#my-widget"</span><span class="t">&gt;</span>Verify Me<span class="t">&lt;/button&gt;</span>

<span class="c">&lt;!-- Hidden widget - shown when button clicked --&gt;</span>
<span class="t">&lt;zeno-widget</span>
    <span class="a">id</span>=<span class="v">"my-widget"</span>
    <span class="a">style</span>=<span class="v">"display: none;"</span>
    <span class="a">zeno-site-key</span>=<span class="v">"550e8400-e29b-41d4-a716-446655440000"</span>
    <span class="a">zeno-api-endpoint</span>=<span class="v">"https://zeno.secops.workers.dev/api"</span>
    <span class="a">onsolve</span>=<span class="v">"handleFloatingSolve(event)"</span>
<span class="t">&gt;&lt;/zeno-widget&gt;</span>`,

            'float-js': `<span class="c">// Floating handler is built into the library</span>
<span class="c">// Clicking [zeno-floating] triggers the referenced widget</span>

<span class="c">// Custom implementation (if needed):</span>
document.<span class="f">addEventListener</span>(<span class="s">'click'</span>, (e) =&gt; {
    <span class="k">const</span> trigger = e.target.<span class="f">closest</span>(<span class="s">'[zeno-floating]'</span>);

    <span class="k">if</span> (trigger) {
        <span class="k">const</span> selector = trigger.<span class="f">getAttribute</span>(<span class="s">'zeno-floating'</span>);
        <span class="k">const</span> widget = document.<span class="f">querySelector</span>(selector);

        <span class="k">if</span> (widget) {
            widget.style.display = <span class="s">'block'</span>;
        }
    }
});

<span class="c">// Handle solve event</span>
<span class="k">function</span> <span class="f">handleFloatingSolve</span>(event) {
    console.<span class="f">log</span>(<span class="s">'Token:'</span>, event.detail.token);
    event.target.style.display = <span class="s">'none'</span>;
}`,

            'float-css': `<span class="c">/* Position the floating widget */</span>
<span class="sel">#my-widget</span> {
    <span class="cp">position</span>: <span class="cv">fixed</span>;
    <span class="cp">bottom</span>: <span class="cv">20px</span>;
    <span class="cp">right</span>: <span class="cv">20px</span>;
    <span class="cp">z-index</span>: <span class="cv">9999</span>;
}

<span class="c">/* Style the trigger button */</span>
<span class="sel">[zeno-floating]</span> {
    <span class="cp">background</span>: <span class="cv">#007bff</span>;
    <span class="cp">color</span>: <span class="cv">white</span>;
    <span class="cp">border</span>: <span class="cv">none</span>;
    <span class="cp">padding</span>: <span class="cv">12px 24px</span>;
    <span class="cp">border-radius</span>: <span class="cv">8px</span>;
    <span class="cp">cursor</span>: <span class="cv">pointer</span>;
    <span class="cp">font-weight</span>: <span class="cv">600</span>;
}

<span class="sel">[zeno-floating]:hover</span> {
    <span class="cp">background</span>: <span class="cv">#0056b3</span>;
}`,

            'inv-html': `<span class="c">&lt;!-- No widget element needed for invisible mode --&gt;</span>
<span class="c">&lt;!-- Just import the library as a module --&gt;</span>

<span class="t">&lt;script</span> <span class="a">type</span>=<span class="v">"module"</span><span class="t">&gt;</span>
    <span class="k">import</span> { Zeno } <span class="k">from</span> <span class="s">'https://cdn.jsdelivr.net/gh/zeno-security/zeno@latest/dist/client/zeno.min.js'</span>;

    <span class="c">// Use Zeno API programmatically</span>
    <span class="k">const</span> zeno = <span class="k">new</span> <span class="f">Zeno</span>({
        apiEndpoint: <span class="s">'https://zeno.secops.workers.dev/api'</span>,
        siteKey: <span class="s">'550e8400-e29b-41d4-a716-446655440000'</span>
    });
<span class="t">&lt;/script&gt;</span>`,

            'inv-js': `<span class="k">import</span> { Zeno } <span class="k">from</span> <span class="s">'https://cdn.jsdelivr.net/gh/zeno-security/zeno@latest/dist/client/zeno.min.js'</span>;

<span class="k">async</span> <span class="k">function</span> <span class="f">protectAction</span>() {
    <span class="c">// Initialize Zeno</span>
    <span class="k">const</span> zeno = <span class="k">new</span> <span class="f">Zeno</span>({
        apiEndpoint: <span class="s">'https://zeno.secops.workers.dev/api'</span>,
        siteKey: <span class="s">'550e8400-e29b-41d4-a716-446655440000'</span>
    });

    <span class="k">try</span> {
        <span class="c">// Solve invisibly (no UI)</span>
        <span class="k">const</span> startTime = Date.<span class="f">now</span>();
        <span class="k">const</span> { token } = <span class="k">await</span> zeno.<span class="f">solve</span>();
        <span class="k">const</span> duration = (Date.<span class="f">now</span>() - startTime) / <span class="n">1000</span>;

        console.<span class="f">log</span>(<span class="s">\`Solved in \${duration}s\`</span>);
        console.<span class="f">log</span>(<span class="s">'Token:'</span>, token);

        <span class="c">// Submit token to your server</span>
        <span class="c">// POST /api/verify { "token": token, "site_key": "...", "single": true }</span>
        <span class="k">return</span> token;
    } <span class="k">catch</span> (error) {
        console.<span class="f">error</span>(<span class="s">'Verification failed:'</span>, error);
        <span class="k">throw</span> error;
    }
}`,

            'inv-css': `<span class="c">/* No CSS needed for invisible mode */</span>
<span class="c">/* The solve happens entirely in the background */</span>

<span class="c">/* Optional: Show loading state on your button */</span>
<span class="sel">.btn-loading</span> {
    <span class="cp">opacity</span>: <span class="cv">0.7</span>;
    <span class="cp">pointer-events</span>: <span class="cv">none</span>;
}

<span class="sel">.btn-loading::after</span> {
    <span class="cp">content</span>: <span class="cv">'...'</span>;
    <span class="cp">animation</span>: <span class="cv">dots 1s infinite</span>;
}

<span class="sel">@keyframes dots</span> {
    0%, 20% { <span class="cp">content</span>: <span class="cv">'.'</span>; }
    40% { <span class="cp">content</span>: <span class="cv">'..'</span>; }
    60%, 100% { <span class="cp">content</span>: <span class="cv">'...'</span>; }
}`,

            'js-html': `<span class="c">&lt;!-- Force JavaScript-only mode (no WASM) --&gt;</span>
<span class="c">&lt;!-- Useful for environments where WASM is blocked --&gt;</span>

<span class="t">&lt;zeno-widget</span>
    <span class="a">zeno-site-key</span>=<span class="v">"550e8400-e29b-41d4-a716-446655440000"</span>
    <span class="a">zeno-api-endpoint</span>=<span class="v">"https://zeno.secops.workers.dev/api"</span>
    <span class="a">zeno-force-js</span>  <span class="c">&lt;!-- Forces JS-only mode --&gt;</span>
    <span class="a">onsolve</span>=<span class="v">"handleSolve(event)"</span>
<span class="t">&gt;&lt;/zeno-widget&gt;</span>

<span class="c">&lt;!-- Widget displays compatibility mode banner --&gt;</span>
<span class="c">&lt;!-- Solving will be slower but still functional --&gt;</span>`,

            'js-js': `<span class="c">// No special JavaScript needed</span>
<span class="c">// The 'zeno-force-js' attribute handles everything</span>

<span class="c">// The widget automatically:</span>
<span class="c">// 1. Skips WASM initialization</span>
<span class="c">// 2. Uses pure JavaScript solver</span>
<span class="c">// 3. Shows "compatibility mode" banner</span>

<span class="c">// Handle solve event normally</span>
<span class="k">function</span> <span class="f">handleSolve</span>(event) {
    <span class="k">const</span> token = event.detail.token;
    console.<span class="f">log</span>(<span class="s">'JS Mode Token:'</span>, token);

    <span class="c">// Token works identically to WASM mode</span>
    <span class="c">// Verify with: { "token": token, "site_key": "...", "single": true }</span>
    <span class="f">submitToServer</span>(token);
}

<span class="c">// For invisible API, use forceJS option:</span>
<span class="k">const</span> zeno = <span class="k">new</span> <span class="f">Zeno</span>({
    apiEndpoint: <span class="s">'...'</span>,
    siteKey: <span class="s">'...'</span>,
    forceJS: <span class="k">true</span>
});`,

            'js-css': `<span class="c">/* Customize the compatibility mode banner */</span>

<span class="c">/* Override banner text via CSS variable */</span>
<span class="sel">zeno-widget[zeno-force-js]</span> {
    <span class="cp">--zeno-i18n-js-mode-label</span>: <span class="cv">"Running in compatibility mode"</span>;
    <span class="cp">--zeno-i18n-wasm-banner</span>: <span class="cv">"Enable WASM for faster solving"</span>;
}

<span class="c">/* Optional: Style the banner differently */</span>
<span class="sel">zeno-widget[zeno-force-js]::part(banner)</span> {
    <span class="cp">background</span>: <span class="cv">#fff3cd</span>;
    <span class="cp">color</span>: <span class="cv">#856404</span>;
    <span class="cp">padding</span>: <span class="cv">8px 12px</span>;
    <span class="cp">font-size</span>: <span class="cv">12px</span>;
    <span class="cp">border-radius</span>: <span class="cv">4px</span>;
}`
        };

        // Populate code content
        document.addEventListener('DOMContentLoaded', () => {
            Object.keys(codeContent).forEach(id => {
                const el = document.getElementById(id);
                if (el) el.innerHTML = codeContent[id];
            });
        });

        function openTab(evt, tabId) {
            const viewer = evt.currentTarget.closest('.code-viewer');
            const contents = viewer.getElementsByClassName('tab-content');
            for (let i = 0; i < contents.length; i++) {
                contents[i].style.display = 'none';
                contents[i].classList.remove('active');
            }
            const tabs = viewer.getElementsByClassName('tab-btn');
            for (let i = 0; i < tabs.length; i++) {
                tabs[i].className = tabs[i].className.replace(" active", "");
            }
            document.getElementById(tabId).style.display = 'block';
            document.getElementById(tabId).classList.add('active');
            evt.currentTarget.className += " active";
        }
    </script>

    <script type="module">
        import { Zeno } from './zeno.min.js';

        document.addEventListener('DOMContentLoaded', () => {
            const btn = document.getElementById('btn-invisible');
            if (btn) {
                btn.addEventListener('click', async () => {
                    const log = document.getElementById('inv-log');
                    log.innerText = "Processing...";
                    try {
                        const zeno = new Zeno({
                            apiEndpoint: 'https://zeno.secops.workers.dev/api',
                            siteKey: '550e8400-e29b-41d4-a716-446655440000'
                        });
                        const startTime = Date.now();
                        const { token } = await zeno.solve();
                        const duration = ((Date.now() - startTime) / 1000).toFixed(2);
                        log.innerText = `Solved! Token: ${token.substring(0, 8)}... (${duration}s)`;
                    } catch (e) {
                        log.innerText = "Error: " + e.toString();
                        console.error(e);
                    }
                });
            }

            const widget = document.getElementById('zeno-style');
            if (widget) {
                widget.style.setProperty('--zeno-background', '#1a1a1a');
                widget.style.setProperty('--zeno-color', '#ffffff');
                widget.style.setProperty('--zeno-border-radius', '26px');
                widget.style.setProperty('--zeno-background-hover', '#1a1a1a');
                widget.style.setProperty('--zeno-border-color', '#444');
                widget.style.setProperty('--zeno-widget-height', '52px');
                widget.style.setProperty('--zeno-widget-width', '260px');
                widget.style.setProperty('--zeno-widget-padding', '12px');
                widget.style.setProperty('--zeno-checkbox-background', '#333');
                widget.style.setProperty('--zeno-checkbox-border', '1px solid #555');
                widget.style.setProperty('--zeno-checkbox-border-radius', '8px');
                widget.style.setProperty('--zeno-checkbox-size', '24px');
            }
        });

        window.updateStyle = (varName, value) => {
            const widget = document.getElementById('zeno-style');
            if (widget) widget.style.setProperty(varName, value);
        };

        window.updateAttribute = (attrName, value) => {
            const widget = document.getElementById('zeno-style');
            if (widget) widget.setAttribute(attrName, value);
        };
    </script>
</body>

</html>